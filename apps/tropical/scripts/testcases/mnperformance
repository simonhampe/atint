# This script compute the tropical moduli spaces for abstract rational curves and times computation

use application "common";
use application "tropical";
use application "fan";
use Benchmark qw(:all);

# Do it once for initialization
print "Initializing..:";
tropical::tropical_mn(5);
print "Done.\n";

#Now compute Mn's
my $maxn = 8;
for(my $i = 5; $i <= $maxn; $i++) {
    print "Computing M_",$i,"\n";
    my $t0 = Benchmark->new;
    my $m = tropical::tropical_mn($i);
    my $t1 = Benchmark->new;
    my $s = timediff($t1,$t0);
    #Save the fan and print out the time it took
    print "Time taken: ", timestr($s),"\n";
    save($m,"moduli$i");
}